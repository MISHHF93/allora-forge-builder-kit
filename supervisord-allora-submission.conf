[program:allora-submission]
; Allora BTC/USD Prediction Submission Daemon
; 
; Install: cp supervisord-allora-submission.conf /etc/supervisor/conf.d/
; Manage: supervisorctl start/stop/restart/status allora-submission
;

; Execution settings
command=/workspaces/allora-forge-builder-kit/.venv/bin/python -u /workspaces/allora-forge-builder-kit/submit_prediction.py --daemon
directory=/workspaces/allora-forge-builder-kit
user=codespa
autostart=true
autorestart=true
startsecs=10
stopasgroup=true
killasgroup=true

; Resource limits
memory_limit=2147483648  ; 2GB in bytes
cpu_priority=10          ; Higher number = lower priority (10 is moderate)

; Output logging
stdout_logfile=/workspaces/allora-forge-builder-kit/logs/supervisord-stdout.log
stdout_logfile_maxbytes=52428800  ; 50MB
stdout_logfile_backups=5
stderr_logfile=/workspaces/allora-forge-builder-kit/logs/supervisord-stderr.log
stderr_logfile_maxbytes=52428800  ; 50MB
stderr_logfile_backups=5

; Restart behavior on failure
redirect_stderr=false
priority=999
numprocs=1

; Environment variables
environment=PATH="/workspaces/allora-forge-builder-kit/.venv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",PYTHONUNBUFFERED="1"

; Graceful shutdown
stopwaitsecs=30
stopasgroup=true
killasgroup=true

; Event listeners for monitoring (optional)
; Uncomment to enable email notifications on crashes
; eventlistener=event_handler
