â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ALLORA FORGE - EC2 MIGRATION COMPLETE WORKFLOW                   â•‘
â•‘           Instance: i-0dc6b17115f9836fa (44.249.158.207)                   â•‘
â•‘           Topic 67: 7-Day BTC/USD Log-Return Prediction                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 1: CONNECT TO EC2 FROM YOUR LOCAL MACHINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ensure key has correct permissions
chmod 400 allora-keypair.pem

# Connect to EC2 instance
ssh -i allora-keypair.pem ubuntu@44.249.158.207

# If connection fails, verify:
# - Security group allows SSH (port 22) from your IP
# - Instance is running (check AWS console)
# - Public IP hasn't changed (44.249.158.207)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 2: ONCE CONNECTED TO EC2, RUN AUTOMATED BOOTSTRAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Option A: Quick Clone & Bootstrap (RECOMMENDED)
cd ~
git clone https://github.com/MISHHF93/allora-forge-builder-kit.git
cd allora-forge-builder-kit
./ec2_bootstrap.sh

# The bootstrap script will:
# âœ… Update system packages
# âœ… Install Python and dependencies
# âœ… Clone/update repository
# âœ… Setup wallet configuration
# âœ… Configure environment variables
# âœ… Verify everything is working
# âœ… Optionally start the worker

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 3: CONFIGURE WALLET (If bootstrap prompts you)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Create wallet file with your 24-word mnemonic
nano .allora_key

# Paste your mnemonic (one line, space-separated):
# word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11 word12 word13 word14 word15 word16 word17 word18 word19 word20 word21 word22 word23 word24

# Save: Ctrl+O, Enter, Ctrl+X

# Secure the file
chmod 600 .allora_key

# Verify wallet address
python3 tools/print_wallet_address.py

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 4: SET ENVIRONMENT VARIABLES (If not auto-detected)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Get wallet address from mnemonic
export ALLORA_WALLET_ADDR=$(python3 tools/print_wallet_address.py | tail -1)

# Set API key (optional but recommended)
export ALLORA_API_KEY="your_api_key_here"

# Make persistent across sessions
echo "export ALLORA_WALLET_ADDR=\"$ALLORA_WALLET_ADDR\"" >> ~/.bashrc
echo "export ALLORA_API_KEY=\"your_api_key_here\"" >> ~/.bashrc
source ~/.bashrc

# Verify
echo $ALLORA_WALLET_ADDR
echo $ALLORA_API_KEY

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 5: START PRODUCTION WORKER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Start worker with our production-ready script
./start_worker.sh

# This will:
# âœ… Stop any old workers
# âœ… Verify configuration
# âœ… Check critical bug fixes are present
# âœ… Start worker in loop mode: --loop --schedule-mode loop --submit
# âœ… Save PID to pipeline.pid
# âœ… Log to pipeline_run.log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 6: MONITOR WORKER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Quick status check
./monitor.sh

# Live monitoring dashboard (updates every 5 seconds)
./watch_live.sh

# Follow logs in real-time
tail -f pipeline_run.log

# Check submissions
tail submission_log.csv

# View worker process
ps aux | grep "python.*train"

# Check worker PID
cat pipeline.pid

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MANUAL DEPLOYMENT (If you prefer step-by-step control)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# 1. Update system
sudo apt update && sudo apt upgrade -y

# 2. Install packages
sudo apt install -y python3 python3-pip git build-essential curl wget jq

# 3. Clone repository
git clone https://github.com/MISHHF93/allora-forge-builder-kit.git
cd allora-forge-builder-kit

# 4. Install Python dependencies
pip3 install -r requirements.txt

# 5. Create wallet file
echo "word1 word2 ... word24" > .allora_key
chmod 600 .allora_key

# 6. Set environment
export ALLORA_WALLET_ADDR=$(python3 tools/print_wallet_address.py | tail -1)
export ALLORA_API_KEY="your_api_key"

# 7. Verify
python3 -c "import train; print('âœ… Ready')"
python3 tools/print_wallet_address.py

# 8. Start worker
./start_worker.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ALTERNATIVE: START WORKER DIRECTLY (Without start_worker.sh)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Start in background with nohup
nohup python3 train.py --loop --schedule-mode loop --submit > pipeline_run.log 2>&1 &

# Save PID
echo $! > pipeline.pid

# Verify running
ps -p $(cat pipeline.pid)

# Monitor
tail -f pipeline_run.log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SYSTEMD SERVICE (For Production - Auto-restart)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Create service file
sudo nano /etc/systemd/system/allora-worker.service

# Paste this content:
[Unit]
Description=Allora Forge Worker - Topic 67
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/allora-forge-builder-kit
Environment="ALLORA_API_KEY=your_api_key"
Environment="ALLORA_WALLET_ADDR=allo1xxxxxxxxx6vma"
ExecStart=/usr/bin/python3 train.py --loop --schedule-mode loop --submit
Restart=always
RestartSec=10
StandardOutput=append:/home/ubuntu/allora-forge-builder-kit/pipeline_run.log
StandardError=append:/home/ubuntu/allora-forge-builder-kit/pipeline_run.log

[Install]
WantedBy=multi-user.target

# Enable and start
sudo systemctl daemon-reload
sudo systemctl enable allora-worker.service
sudo systemctl start allora-worker.service

# Check status
sudo systemctl status allora-worker.service

# View logs
sudo journalctl -u allora-worker.service -f

# Control commands
sudo systemctl stop allora-worker.service
sudo systemctl restart allora-worker.service

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Connection Issues:
  âœ“ Verify security group allows port 22 from your IP
  âœ“ Check instance state in AWS console (should be "running")
  âœ“ Confirm public IP: 44.249.158.207
  âœ“ Try: ssh -v -i allora-keypair.pem ubuntu@44.249.158.207

Wallet Issues:
  âœ“ Check .allora_key exists: ls -la .allora_key
  âœ“ Verify permissions: chmod 600 .allora_key
  âœ“ Test derivation: python3 tools/print_wallet_address.py

Worker Not Starting:
  âœ“ Check logs: tail -50 pipeline_run.log
  âœ“ Verify imports: python3 -c "import train"
  âœ“ Check dependencies: pip3 install -r requirements.txt
  âœ“ Verify env vars: echo $ALLORA_WALLET_ADDR

Submission Failures:
  âœ“ Check submission_log.csv for status codes
  âœ“ View recent lifecycle: ls -lt data/artifacts/logs/ | head -5
  âœ“ Check window timing: ./monitor.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EXPECTED OPERATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Once running, the worker will:
  âœ… Train XGBoost models every hour with 28-day BTC/USD data
  âœ… Submit predictions at HH:00:00 UTC when submission window opens
  âœ… Handle REST API 501 errors gracefully (fallback mode)
  âœ… Log all iterations with timestamps and durations
  âœ… Track submissions in submission_log.csv
  âœ… Generate lifecycle JSON artifacts for debugging
  âœ… Run autonomously through December 15, 2025

Log messages you'll see:
  â€¢ INFO - REST endpoint not implemented: status=501 (using fallback)
  â€¢ INFO - REST API fallback mode: 4 endpoint(s) not implemented...
  â€¢ INFO - Topic 67: Fallback reputers_count=1
  â€¢ INFO - [loop] iteration=X start at YYYY-MM-DDTHH:00:00Z
  â€¢ âœ… Iteration X completed (rc=0, duration=XX.Xs)
  â€¢ ğŸ’¤ Sleeping XX.X minutes until next cycle...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VERIFICATION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before disconnecting from SSH:
  â˜ Worker process running: ps aux | grep "python.*train"
  â˜ PID file exists: cat pipeline.pid
  â˜ Logs being written: tail pipeline_run.log
  â˜ Submissions tracked: tail submission_log.csv
  â˜ Wallet address correct: python3 tools/print_wallet_address.py
  â˜ Environment vars set: echo $ALLORA_WALLET_ADDR
  â˜ Next iteration time visible in logs
  â˜ No critical errors in recent logs (last 50 lines)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
KEEPALIVE (Optional - Stay connected during long runs)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Option 1: Use screen (recommended for long sessions)
screen -S allora
# Run your commands
# Detach: Ctrl+A then D
# Reattach: screen -r allora

# Option 2: Use tmux
tmux new -s allora
# Run your commands
# Detach: Ctrl+B then D
# Reattach: tmux attach -t allora

# Option 3: Configure SSH keepalive
# Add to ~/.ssh/config on your local machine:
Host allora-ec2
    HostName 44.249.158.207
    User ubuntu
    IdentityFile ~/path/to/allora-keypair.pem
    ServerAliveInterval 60
    ServerAliveCountMax 3

# Then connect with: ssh allora-ec2

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILES REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Key Files on EC2:
  ğŸ“ ~/allora-forge-builder-kit/       â†’ Main repository
  ğŸ” .allora_key                        â†’ Wallet mnemonic (SECURE!)
  ğŸ¤– pipeline.pid                       â†’ Worker process ID
  ğŸ“ pipeline_run.log                   â†’ Execution logs
  ğŸ“Š submission_log.csv                 â†’ Submission history
  âš™ï¸  config/pipeline.yaml              â†’ Competition schedule
  ğŸ—‚ï¸  data/artifacts/logs/lifecycle-*.json â†’ Debug artifacts

Scripts:
  ğŸš€ start_worker.sh                    â†’ Start production worker
  ğŸ“Š monitor.sh                         â†’ Status snapshot
  ğŸ‘ï¸  watch_live.sh                     â†’ Live dashboard
  ğŸ”§ ec2_bootstrap.sh                   â†’ Initial setup script

Documentation:
  ğŸ“– AWS_DEPLOYMENT_GUIDE.md            â†’ Full deployment guide
  ğŸ“‹ AWS_QUICK_PROMPT.txt               â†’ Quick reference
  ğŸ›¡ï¸  HTTP_501_HANDLING.md              â†’ 501 error handling docs

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
INSTANCE DETAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Instance ID:    i-0dc6b17115f9836fa
Public IP:      44.249.158.207
Key File:       allora-keypair.pem
User:           ubuntu
Region:         (Check AWS console)
Instance Type:  (Check AWS console - recommend t3.medium or larger)

SSH Command:    ssh -i allora-keypair.pem ubuntu@44.249.158.207

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMPETITION DETAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Topic:          67 (7-Day BTC/USD Log-Return Prediction)
Period:         Sep 16, 2025 13:00 UTC â†’ Dec 15, 2025 13:00 UTC
Cadence:        Hourly (HH:00:00 UTC)
Window:         Last 600 blocks (~50 minutes) of each epoch
Training:       28-day rolling window of BTC/USD OHLCV
Model:          XGBoost histogram gradient boosting

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ READY TO DEPLOY!

Run: ssh -i allora-keypair.pem ubuntu@44.249.158.207
Then: ./ec2_bootstrap.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
